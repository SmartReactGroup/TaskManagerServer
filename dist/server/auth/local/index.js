"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _express=require("express"),_express2=_interopRequireDefault(_express),_passport=require("passport"),_passport2=_interopRequireDefault(_passport),_auth=require("../auth.service");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var router=_express2.default.Router();router.post("/",function(e,r,t){_passport2.default.authenticate("local",function(e,t,s){var u=e||s;if(u)return r.status(401).json(u);if(!t)return r.status(404).json({message:"Something went wrong, please try again."});var o=(0,_auth.signToken)(t._id,t.role);r.json({token:o})})(e,r,t)}),exports.default=router;